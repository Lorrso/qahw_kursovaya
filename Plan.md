# План автоматизации тестирования
## Перечень автоматизируемых сценариев
### Сценарии автоматизации формы покупки

**Предусловие:** нажать на главной странице кнопку "Купить". Отображается форма покупки тура.<br>

* **Позитивные сценарии.** <br>

#### Сценарий 1. 
Все поля формы заполняются валидными данными. <br>
*Перечень необходимых проверок для каждого поля:*
1. **Номер карты:**
    * 1111 2222 3333 4444;
    * 5555 6666 7777 8888.
2. **Месяц:** 
    * нынешний месяц; 
    * месяц, следующий после нынешнего; 
    * нижняя допустимая граница: 01; <br>
**Важно:** дата не должна быть прошедшей. Поле "Год" заполняется годом, следующим после нынешнего.
    * верхняя допустимая граница: 12.
3. **Год:** 
    * нынешний год; <br>
**Важно:** дата не должна быть прошедшей. Поле "Месяц" заполняется месяцем, следующим после нынешнего.
    * год, следующий после нынешнего;
    * верхняя допустимая граница: +5 лет от нынешнего.
**Важно:** Поле "Месяц" заполняется нынешним месяцем.
4. **Владелец:**
    * стандартная форма записи ФИО (пример: Иван Иванович Иванов);
    * нижний регистр (пример: иван иванович иванов);
    * верхний регистр (пример: ИВАН ИВАНОВИЧ ИВАНОВ);
    * без отчества (пример: Иван Иванов);
    * латиница (пример: Ivan Ivanovich Ivanov);
    * ФИО с дефисами (пример: Анна-Мария Анатольевна Горчакова-Сибирская);
    * короткое ФИО (пример: Ян О);
    * длинное ФИО (более 50-ти символов).
5. **CVC/CVV:** три любые цифры.

Нажать кнопку "Продолжить" внизу формы.

**Ожидаемый результат:** На кнопке "Продолжить" отображается лоадер и надпись "Отправляем запрос в Банк...". После завершения операции пользователь видит уведомление в правом верхнем углу: "Успешно! Операция одобрена банком". Данные карты передаются симулятору банковского сервиса Payment Gate, приложение в СУБД сохраняет информацию о том, успешно ли был совершён платёж и каким способом. Данные карты сервисом не сохраняются.

#### Сценарий 2.
1. Поля формы заполняются невалидными данными (см. пункт "Негативные сценарии").
2. Поля очищаются после получения уведомления об ошибке.
3. Поля формы заполняются валидными данными.
4. Нажать кнопку "Продолжить" внизу формы.

**Ожидаемый результат:** С полей убирается красное выделение, из-под полей исчезают уведомления об ошибке. На кнопке "Продолжить" отображается лоадер и надпись "Отправляем запрос в Банк...". После завершения операции пользователь видит уведомление в правом верхнем углу: "Успешно! Операция одобрена банком". Данные карты передаются симулятору банковского сервиса Payment Gate, приложение в СУБД сохраняет информацию о том, успешно ли был совершён платёж и каким способом. Данные карты сервисом не сохраняются.

* **Негативные сценарии.** 
#### Сценарий 1.
Все поля оставить пустыми. <br> 
Нажать кнопку "Продолжить" внизу формы. <br>
**Ожидаемый результат:** Поля выделяются красным цветом. Под ними появляется надпись: "Неверный формат". Операция по отправке формы не происходит.

#### Сценарий 2.
Кроме поля "Номер карты" все поля заполняются валидными данными. <br> 
После заполнения нажать кнопку "Продолжить" внизу формы. <br>
   *Невалидные значения поля "Номер карты":*
   * Нижняя граница (15 цифр); <br>
   **Ожидаемый результат:** Поле выделяется красным цветом. Под ним появляется надпись: "Неверный формат". Операция по отправке формы не происходит.
   * Пустое поле. <br>
   **Ожидаемый результат:** Поле выделяется красным цветом. Под ним появляется надпись: "Неверный формат". Операция по отправке формы не происходит.
   * Несуществующая карта; <br>
   **Ожидаемый результат:** Данные формы отправляются симулятору банковского сервиса, но операция по покупке тура не может быть выполнена. Пользователь видит в правом верхнем углу уведомление: "Ошибка! Банк отказал в проведении операции".

#### Сценарий 3.
Кроме поля "Месяц" все поля заполняются валидными данными. <br> 
После заполнения нажать кнопку "Продолжить" внизу формы. <br>
   *Невалидные значения поля "Месяц":*
   * Нижняя граница (00); <br>
   **Ожидаемый результат:** Поле выделяется красным цветом. Под ним появляется надпись: "Неверно указан срок действия карты". Операция по отправке формы не происходит.
   * Верхняя граница (13); <br>
   **Ожидаемый результат:** Поле выделяется красным цветом. Под ним появляется надпись: "Неверно указан срок действия карты". Операция по отправке формы не происходит.
   * Предыдущий месяц нынешнего года; <br>
   **Ожидаемый результат:** Поле выделяется красным цветом. Под ним появляется надпись: "Неверно указан срок действия карты". Операция по отправке формы не происходит.
   * Вариация записи с одной цифрой (1 вместо 01); <br>
   **Ожидаемый результат:** Поле выделяется красным цветом. Под ним появляется надпись: "Неверный формат". Операция по отправке формы не происходит.
   * Пустое поле. <br>
   **Ожидаемый результат:** Поле выделяется красным цветом. Под ним появляется надпись: "Неверный формат". Операция по отправке формы не происходит.

#### Сценарий 4.
Кроме поля "Год" все поля заполняются валидными данными. <br> 
После заполнения нажать кнопку "Продолжить" внизу формы. <br>
   *Невалидные значения поля "Год":*
   * Предыдущий год; <br>
   **Ожидаемый результат:** Поле выделяется красным цветом. Под ним появляется надпись: "Истёк срок действия карты". Операция по отправке формы не происходит.
   * +6 лет от нынешнего года; <br>
   **Ожидаемый результат:** Поле выделяется красным цветом. Под ним появляется надпись: "Неверно указан срок действия карты". Операция по отправке формы не происходит.
   * 1 цифра; <br>
   **Ожидаемый результат:** Поле выделяется красным цветом. Под ним появляется надпись: "Неверный формат". Операция по отправке формы не происходит.
   * Пустое поле. <br>
   **Ожидаемый результат:** Поле выделяется красным цветом. Под ним появляется надпись: "Неверный формат". Операция по отправке формы не происходит.

#### Сценарий 5.
Кроме поля "Владелец" все поля заполняются валидными данными. <br> 
После заполнения нажать кнопку "Продолжить" внизу формы. <br>
   *Невалидные значения поля "Владелец":*
   * Неполные данные (пример: Иван); <br>
   **Ожидаемый результат:** Поле выделяется красным цветом. Под ним появляется надпись: "Неверный формат". Операция по отправке формы не происходит.
   * Спецсимволы (кроме дефиса); <br>
   **Ожидаемый результат:** Поле выделяется красным цветом. Под ним появляется надпись: "Неверный формат". Операция по отправке формы не происходит.
   * Иероглифы; <br>
   **Ожидаемый результат:** Поле выделяется красным цветом. Под ним появляется надпись: "Неверный формат". Операция по отправке формы не происходит.
   * Поле, заполненное только пробелами; <br>
   **Ожидаемый результат:** Поле выделяется красным цветом. Под ним появляется надпись: "Поле обязательно для заполнения". Операция по отправке формы не происходит.
   * Пустое поле. <br>
   **Ожидаемый результат:** Поле выделяется красным цветом. Под ним появляется надпись: "Поле обязательно для заполнения". Операция по отправке формы не происходит.
     
#### Сценарий 6. 
Кроме поля "CVC/CVV" все поля заполняются валидными данными. <br> 
После заполнения нажать кнопку "Продолжить" внизу формы. <br>
   *Невалидные значения поля "CVC/CVV":*
   * 2 цифры; <br>
   **Ожидаемый результат:** Поле выделяется красным цветом. Под ним появляется надпись: "Неверный формат". Операция по отправке формы не происходит.
   * Пустое поле. <br>
   **Ожидаемый результат:** Поле выделяется красным цветом. Под ним появляется надпись: "Неверный формат". Операция по отправке формы не происходит.

## Перечень используемых инструментов с обоснованием выбора
* **JUnit5:** Фреймворк для создания тестов на языке Java, обеспечивающий взаимодействие со средой разработки ПО Intellij IDEA.
* **Selenide:** Инструмент на базе Selenium WebDriver для удобной реализации UI-тестов веб-приложения.
* **JavaFaker:** Библиотека, позволяющая генерировать массивы тестовых данных.
* **Lombok:** Библиотека для упрощения написания кода, снижающая временные затраты на создание автотестов и стоимость автотестирования.
* **Docker:** Программное обеспечение для контейнеризации, благодаря которой возможно подключение к базе данных приложения.
* **Docker Compose:** Средство для настройки конфигурации развертывания контейнера Docker.
* **Allure Report:** Инструмент для составления отчетности по результатам проведения автотестирования.

## Перечень и описание возможных рисков при автоматизации
1. **Увеличение нагрузки на сайт.** Проведение автоматизированного тестирования увеличивает нагрузку на сайт и может привести к дополнительным сложностям в процессе автотестирования.
2. **Зависимости от внешних систем.** При интеграции с внешними системами (СУБД веб-приложения, симулятор банковских сервисов), автоматизированные тесты могут столкнуться с проблемами стабильности этих сервисов.
3. **Валидация формы.** В связи с отсутствием требований к правилам валидации формы, тестирование данной функциональности требует тщательного планирования, проведения исследовательского тестирования, и может быть усложнено многообразием правил валидации, в связи с чем увеличивается время на написание автотестов.

## Интервальная оценка с учётом рисков в часах
*Тест-план:* 9 часов. <br>
*Тест-дизайн:* 12 часов. <br>
*Разработка автотестов:* 15 часов. <br>
*Проведение тестирования, анализ результатов и составление отчетности:* 9 часов. 

**Суммарно:** 45 часов. <br>
**С учетом рисков:** 57 часов.

## План сдачи работ: когда будут проведены автотесты, результаты их проведения и отчёт по автоматизации
**Проведение автоматизированного тестирования:** до 22 февраля. <br>
**Заведены баг-репорты:** до 24 февраля. <br>
**Отчет по автоматизации:** до 27 февраля.
